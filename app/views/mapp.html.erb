<!DOCTYPE html>
<html ng-app="TravelApp">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <script src="/lib/js/ng-map.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Poiret+One' rel='stylesheet' type='text/css'>​
    <%= stylesheet_link_tag 'mapp', media: 'all' %>
    <%= javascript_include_tag 'angular' %>
    <link rel="stylesheet" media="screen"  href="/lib/css/timeline_style.css" />
  </head>
  <body>
      <div ng-controller="mapController">
        <ng-map center="0,0"
                zoom=2
                default-style="false"
                zoom-control="true"
                zoom-control-options="{position: 'LEFT_CENTER'}"
                map-type-control="FALSE"
                styles=[{"featureType":"all","elementType":"all","stylers":[{"saturation":-100},{"gamma":0.5}]}]>
              <marker ng-repeat="trip in trips" icon="{{user_marker}}" position="{{trip.latitude}}, {{trip.longitude}}" trip-id="{{trip.trip_id}}" animation="DROP" on-click="show()"></marker>
​
    <div id="modal">
        <main ng-controller="TripsController as trips" id="temp-overflow">
          <div id="card">
            <div class="back">
              <!-- List of All the Users Trips -->
              <h2>All of your trips</h2>
              <form>
                <input type="submit" value="Back to Create Trip"/>
              </form>
              <ul>
                <li ng-repeat="trip in trips.current_user_trips">
                  Title: {{trip.title}} <br />
                  Destination: {{trip.destination}} <br />
                  Description: {{trip.description}} <br />
                  Dates: From {{trip.start_date}} to {{trip.end_date}} <br />
                  Notes: {{trip.notes}} <br />
                  <% if #{{trip.user.username}} === #{{trips.current_user.username}} %>
                  <form ng-submit="trips.deleteTrip(trip)">
                    <input type="submit" value="Delete Trip">
                  </form>
                  <form ng-submit="trips.editTrip(trip)">
                    <input type="submit" value="Edit your Trip"/>
                  </form>
                  <% end %>
                <div ng-controller="CommentsController as commentsCtrl">
                  <h3>Comments:</h3>
                    <ul>
                      <li ng-repeat="comment in trip.comments">
                        Entry: {{comment.entry}}
                        Author: {{comment.commenter}}
                      </li>
                    </ul>
                    <form ng-submit="commentsCtrl.createComment()">
                      <input type="text" ng-model="commentsCtrl.newCommentEntry" placeholder="entry"/>
                      <input type="submit" value="Comment"/>
                    </form>
                  </div>
                </li>
              </ul>
            </div>
            <div class="front">
              <!-- Form to Enter Users Latest Trip -->
              <h2>Where have you been?</h2>
              <form ng-submit="trips.createTrip()">
                <input type="text" ng-model="trips.newTripTitle" placeholder="Title"/>
                <input class="search" places-auto-complete types="['geocode']" on-place-changed="placeChanged()"/>
                <input type="text" ng-model="trips.newTripDescription" placeholder="Description"/>
                <input type="date" ng-model="trips.newTripStartDate" placeholder="Start Date"/>
                <input type="date" ng-model="trips.newTripEndDate" placeholder="End Date"/>
                <input type="text" ng-model="trips.newTripNotes" placeholder="Notes"/>
                <input type="submit" value="Submit your Trip"/>
              </form>
              <form>
                <input type="submit" value="View Your Trips"/>
              </form>
            </div>
          </div>
    </div>

<!-- Please note: below HTML is from jQuery Timelinr (https://github.com/juanbrujo/jQuery-Timelinr) with some parameters modified. -->

    <div class='timeline'>
      <div id="timeline">
        <ul id="dates">
          <li><a href="#">11/24/2011</a></li>
    			<li><a href="#">6/28/2012</a></li>
    			<li><a href="#">11/13/2013</a></li>
    			<li><a href="#">1/1/2015</a></li>
          <li><a href="#">4/2/2015</a></li>
          <li><a href="#">6/30/2015</a></li>
          <li><a href="#">8/3/2015</a></li>
          <li><a href="#">11/2/2015</a></li>
        </ul>
​
        <ul id="issues">
          <li id="?">
  			    <h1>Trip to Japan for Work</h1>
    			</li>
    			<li id="?">
    				<h1>Coders Convention in Vegas</h1>
    			</li>
    			<li id="?">
    				<h1>Surprise Trip for my GF and I</h1>
    			</li>
    			<li id="?">
    				<h1>Scuba Diving in Mexico</h1>
    			</li>
          <li id="?">
            <h1>Road Trip to Boston</h1>
          </li>
          <li id="?">
            <h1>Ski Trip in Australia</h1>
          </li>
          <li id="?">
            <h1>Our Honeymoon to Hawaii</h1>
          </li>
          <li id="?">
            <h1>My Trip to Bali</h1>
          </li>
        </ul>
​
        <a href="#" id="next">+</a>
        <a href="#" id="prev">-</a>
​
      </div>
    </div>
  </main>
​    <script src="/lib/js/jquery.flip.js"></script>
    <script>
    $(function($) {
      $("#card").flip();
    });
    </script>
​
    <script>
      $(function(){
        $().timelinr({
          arrowKeys: 'true',
          startAt: 0
        })
      });
    </script>
  </ng-map>
</div>
    <script src="/lib/js/jquery.timelinr-0.9.54.js"></script>
  </body>
</html>
