<!DOCTYPE html>
<html ng-app="TravelApp">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <script src="/lib/js/ng-map.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <%= stylesheet_link_tag 'mapp', media: 'all' %>
    <%= javascript_include_tag 'angular' %>
    <link rel="stylesheet" media="screen"  href="/lib/css/timeline_style.css" />


  </head>
  <body>
      <div ng-controller="mapController">
        <ng-map center="0,0"
                zoom=3
                minZoom=3
                default-style="false"
                zoom-control="true"
                zoom-control-options="{position: 'LEFT_BOTTOM'}"
                map-type-control-options="{position: 'LEFT_BOTTOM'}"
                styles=[{"featureType":"all","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"all","elementType":"labels.text.fill","stylers":[{"saturation":36},{"color":"#000000"},{"lightness":40}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"visibility":"on"},{"color":"#000000"},{"lightness":16}]},{"featureType":"all","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#000000"},{"lightness":17},{"weight":1.2}]},{"featureType":"administrative.country","elementType":"labels.text.fill","stylers":[{"color":"#ed5929"}]},{"featureType":"administrative.locality","elementType":"labels.text.fill","stylers":[{"color":"#c4c4c4"}]},{"featureType":"administrative.neighborhood","elementType":"labels.text.fill","stylers":[{"color":"#ed5929"}]},{"featureType":"landscape","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":20}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":21},{"visibility":"on"}]},{"featureType":"poi.business","elementType":"geometry","stylers":[{"visibility":"on"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#ed5929"},{"lightness":"0"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.highway","elementType":"labels.text.stroke","stylers":[{"color":"#ed5929"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":18}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#575757"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"road.arterial","elementType":"labels.text.stroke","stylers":[{"color":"#2c2c2c"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":16}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#999999"}]},{"featureType":"transit","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":19}]},{"featureType":"water","elementType":"geometry","stylers":[{"color":"#000000"},{"lightness":17}]}]
                >
              <marker position="-40, 70" on-click="show()"></marker>
                <!-- zoom-to-include-markers="true"
                minZoom=2  -->
          <!-- <marker ng-repeat="trip in trips.trips" position="{{trip.latitude}},{{trip.longitude}}" animation="DROP" title="{{trip.name}}" on-click="show()"></marker> -->
        </ng-map>
      </div>

    <!-- John: Angular code -->
    <!-- <header ng-controller="HeaderController as header">
    <h1>Welcome, {{header.current_user.username}}!</h1>
    </header> -->
    <main ng-controller="TripsController as trips" id="temp-overflow">

    <div id="modal">
          <!-- List of All the Users Trips -->
          <h2>All of your trips</h2>
          <ul>
            <li ng-repeat="trip in trips.current_user_trips">
              Title: {{trip.title}}
              Destination: {{trip.destination}}
              Description: {{trip.description}}
              Start Date: {{trip.start_date}}
              End Date: {{trip.end_date}}
              Tags: {{trip.trip_type}}
              Notes: {{trip.notes}}
              Latitude: {{trip.latitude}}
              Longitude: {{trip.longitude}}
              <% if #{{trip.user.username}} === #{{trips.current_user.username}} %>
              <form ng-submit="trips.deleteTrip(trip)">
                <input type="submit" value="Delete Trip">
              </form>
              <br/>
              <form ng-submit="trips.editTrip(trip)">
                <input type="text" ng-model="trips.editTripTitle" placeholder="Title" value="{{trip.title}}"/>
                <input type="text" ng-model="trips.editTripDescription" placeholder="Description" value="{{trip.description}}"/>
                <input type="date" ng-model="trips.editTripStartDate" placeholder="Start Date"/>
                <input type="date" ng-model="trips.editTripEndDate" placeholder="End Date"/>
                <input type="text" ng-model="trips.editTripNotes" placeholder="Notes" value="{{trip.notes}}"/>
                <input type="submit" value="Edit your Trip"/>
              </form>
              <% end %>

            <div ng-controller="CommentsController as commentsCtrl">
              <h3>Comments:</h3>
                <ul>
                  <li ng-repeat="comment in trip.comments">
                    Entry: {{comment.entry}}
                    Author: {{comment.commenter}}
                  </li>
                </ul>
                <form ng-submit="commentsCtrl.createComment()">
                  <input type="text" ng-model="commentsCtrl.newCommentEntry" placeholder="entry"/>
                  <input type="submit" value="Comment"/>
                </form>
              </div>
            </li>
          </ul>

          <!-- Form to Enter Users Latest Trip -->
          <h2>Where have you been?</h2>
          <form ng-submit="trips.createTrip()">
            <input type="text" ng-model="trips.newTripTitle" placeholder="Title"/>
            <input class="search" places-auto-complete types="['geocode']" on-place-changed="placeChanged()"/>
            <input type="text" ng-model="trips.newTripDescription" placeholder="Description"/>
            <input type="date" ng-model="trips.newTripStartDate" placeholder="Start Date"/>
            <input type="date" ng-model="trips.newTripEndDate" placeholder="End Date"/>
            <input type="text" ng-model="trips.newTripNotes" placeholder="Notes"/>
            <input type="submit" value="Submit your Trip"/>
          </form>
    </div>
    <div class='timeline'>
      <div id="timeline">
        <ul id="dates">
          <li ng-repeat="trip in trips.current_user_trips"><a href="#">{{trip.start_date}}</a></li>
        </ul>

        <ul id="issues">
          <li ng-repeat="trip in trips.current_user_trips" id="?">
            <h1>My Trip to {{trip.destination}}</h1>
          </li>
        </ul>

        <a href="#" id="next">+</a>
        <a href="#" id="prev">-</a>

      </div>
    </div>
  </main>

    <script>
      $(function(){
        $().timelinr({
          arrowKeys: 'true',
          startAt: 0
        })
      });
    </script>
    <script src="/lib/js/jquery.timelinr-0.9.54.js"></script>
  </body>
</html>
